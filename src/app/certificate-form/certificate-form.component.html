<form [formGroup]="certificateForm">
  <div><p class="section-title">证书基础信息</p></div>
  <div class="cert-info">
    <nz-form-item>
      <nz-form-label>证书类型</nz-form-label>
      <nz-select formControlName="certificateTemplate">
        <nz-option
          *ngFor="let option of certificateTemplateOptions"
          [nzValue]="option.value"
          [nzLabel]="option.label">
        </nz-option>
      </nz-select>
    </nz-form-item>
    <nz-form-item *ngIf="isTemplateTypeTw">
      <nz-form-label>认证方向</nz-form-label>
      <nz-select formControlName="certDirection">
        <nz-option *ngFor="let option of certificateDirectionOptions" [nzValue]="option.value"
                   [nzLabel]="option.label"></nz-option>
      </nz-select>
    </nz-form-item>


    <nz-form-item *ngIf="isTemplateTypeDpm">
      <nz-form-label>等级</nz-form-label>
      <nz-select formControlName="certName">
        <nz-option *ngFor="let option of dpmLevelOptions" [nzValue]="option.value" [nzLabel]="option.label | chineseName"></nz-option>
      </nz-select>
    </nz-form-item>

    <nz-form-item *ngIf="isTemplateTypeTw">
      <nz-form-label>等级</nz-form-label>
      <nz-select formControlName="certName">
        <nz-option *ngFor="let option of certificateLevelOptions" [nzValue]="option.value" [nzLabel]="option.label | chineseName"></nz-option>
      </nz-select>
    </nz-form-item>
    <nz-form-item *ngIf="isOnChain">
      <nz-form-label nzRequired>颁发者</nz-form-label>
      <input nz-input formControlName="issuer" required/>
    </nz-form-item>

    <nz-form-item *ngIf="isOnChain">
      <nz-form-label>获得时间</nz-form-label>
      <nz-date-picker formControlName="publishedAt"></nz-date-picker>
    </nz-form-item>
    <nz-form-item *ngIf="isOnChain">
      <nz-form-label>过期时间</nz-form-label>
      <nz-date-picker class="date-picker" formControlName="expiredAt"></nz-date-picker>
    </nz-form-item>

    <nz-form-item class="company-area">
      <nz-form-label nzRequired>认证对象所属公司</nz-form-label>
      <nz-radio-group [(ngModel)]="companyRadio"
                      (ngModelChange)="changeSubordinateCompany($event)"
                      [ngModelOptions]="{standalone: true}">
        <label nz-radio [nzValue]="companyRadios.THOUGHTWORKS">Thoughtworks</label>
        <label nz-radio [nzValue]="companyRadios.OTHERS">其他公司</label>
      </nz-radio-group>
    </nz-form-item>
    <nz-form-item *ngIf="companyRadio === companyRadios.OTHERS">
      <div class="add-new-company">
        <nz-form-label>认证对象所属公司</nz-form-label>
        <span (click)="onVisibleChange(true)">新增公司</span>
      </div>
      <nz-select formControlName="subordinateCompany">
        <nz-option  *ngFor="let option of otherCompaniesOptions" [nzValue]="option" [nzLabel]="option"></nz-option>
      </nz-select>
    </nz-form-item>
    <app-add-company-modal *ngIf="isAddCompanyModalVisible"
                           [isVisible]="isAddCompanyModalVisible"
                           (visibleChange)="onVisibleChange($event)"
                           (addCompany)="addCompany($event)"
    ></app-add-company-modal>
    <nz-form-item *ngIf="!isOnChain">
      <app-logo-photo-upload *ngIf="companyRadio === companyRadios.OTHERS" [logoUrl]="certificateForm.get('logoUrl').value"
                             (photoChange)="certificateForm.patchValue({logoUrl: $event})"></app-logo-photo-upload>
    </nz-form-item>
  </div>

  <div><p class="section-title">认证对象信息</p></div>
  <div class="photo-upload">
    <app-trainee-photo-upload class="trainee-upload" [photoUrl]="certificateForm.get('photoUrl').value"
                              (photoChange)="certificateForm.patchValue({photoUrl: $event})"></app-trainee-photo-upload>
    <!--  <app-logo-photo-upload *ngIf="certificateTemplate === 'tw-cor'" [logoUrl]="certificate.logoUrl"-->
    <!--                         (photoChange)="onLogoChanged($event)"></app-logo-photo-upload>-->
  </div>
  <div class="cert-info">
    <nz-form-item>
      <nz-form-label nzRequired>姓</nz-form-label>
      <input nz-input formControlName="lastName" required/>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzRequired>名</nz-form-label>
      <input nz-input formControlName="firstName" required/>
    </nz-form-item>

    <ng-template [ngIf]="isTemplateTypeDpm || !isOnChain">
      <nz-form-item>
        <nz-form-label>姓（拼音）</nz-form-label>
        <input nz-input formControlName="lastNamePinyin" />
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>名（拼音）</nz-form-label>
        <input nz-input formControlName="firstNamePinyin" />
      </nz-form-item>
    </ng-template>

    <nz-form-item *ngIf="isOnChain">
      <nz-form-label>认证对象身份证号</nz-form-label>
      <input nz-input formControlName="identityNumber" />
    </nz-form-item>

    <nz-form-item>
      <nz-form-label>认证对象手机号</nz-form-label>
      <input nz-input formControlName="phoneNumber" />
    </nz-form-item>

    <nz-form-item *ngIf="isOnChain">
      <nz-form-label>接收者钱包地址(选填)</nz-form-label>
      <input nz-input formControlName="receiverAddress" />
    </nz-form-item>
  </div>
</form>
